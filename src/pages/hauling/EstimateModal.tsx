import { Dialog, Transition } from "@headlessui/react";
import { Fragment } from "react";
import Frame from "../../assets/Frame.png";
import { ResponseData } from "../../interfaces/haulage/haulage";

type SuccessModalProps = {
  isOpen: boolean;
  toggle: () => void;
  toggleComplete?: () => void;
  data: ResponseData | null | undefined;
};
export default function EstimateModal({
  isOpen,
  toggle,
  toggleComplete,
  data,
}: SuccessModalProps) {
 
  const handleBookings = () => {
    const initialTime = 15 * 60;
    localStorage.setItem("countdownTime", JSON.stringify(initialTime));
   

    toggle();
    toggleComplete && toggleComplete();
  };

  return (
    <>
      <Transition appear show={isOpen} as={Fragment}>
        <Dialog as="div" className="relative z-50" onClose={toggle}>
          <Transition.Child
            as={Fragment}
            enter="ease-out duration-300"
            enterFrom="opacity-0"
            enterTo="opacity-100"
            leave="ease-in duration-200"
            leaveFrom="opacity-100"
            leaveTo="opacity-0"
          >
            <div className="fixed inset-0 bg-[#041549] bg-opacity-[0.6]" />
          </Transition.Child>

          <div className="fixed inset-0 overflow-y-auto">
            <div className="flex min-h-full items-center justify-center p-4 text-center">
              <Transition.Child
                as={Fragment}
                enter="ease-out duration-300"
                enterFrom="opacity-0 scale-95"
                enterTo="opacity-100 scale-100"
                leave="ease-in duration-200"
                leaveFrom="opacity-100 scale-100"
                leaveTo="opacity-0 scale-95"
              >
                <Dialog.Panel className="w-full max-w-[816px] transform overflow-hidden rounded-2xl bg-white p-7 text-left align-middle shadow-xl transition-all sm:p-14">
                  <div className="w-full flex gap-x-20">
                    <div className="w-full max-w-[229px] hidden flex-col items-center  gap-y-7 sm:flex">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="77"
                        height="26"
                        viewBox="0 0 77 26"
                        fill="none"
                      >
                        <path
                          d="M74.7755 22.0544C74.5604 22.4605 74.3581 22.8769 74.1277 23.2753C73.9539 23.6077 73.6912 23.8848 73.3691 24.0755C73.047 24.2662 72.6783 24.363 72.3044 24.3549C54.3431 24.3549 36.381 24.3549 18.418 24.3549C17.9508 24.3634 17.4884 24.2602 17.0689 24.0536C16.6494 23.8471 16.285 23.5433 16.0057 23.1674C13.1718 19.5173 10.3404 15.8613 7.51162 12.1993C7.20945 11.8112 6.90984 11.4282 6.6051 11.0297C6.50315 10.8925 6.37002 10.7818 6.21679 10.7066C6.06357 10.6315 5.89468 10.5943 5.7242 10.5979H4.83048C4.65635 10.5979 4.61538 10.6365 4.61538 10.8113V16.1192C4.62417 16.3443 4.55107 16.565 4.40971 16.74C4.26835 16.915 4.0684 17.0324 3.84715 17.0703C3.76195 17.0779 3.67626 17.0779 3.59107 17.0703C3.26841 17.0703 2.94575 17.0703 2.62309 17.0703C2.38911 17.063 2.16693 16.9654 2.00283 16.7978C1.83874 16.6303 1.74537 16.4056 1.74219 16.1706V3.40068C1.74348 3.16128 1.83792 2.93187 2.00537 2.76139C2.17281 2.59091 2.4 2.49286 2.63846 2.48817H3.69094C3.93252 2.4868 4.16482 2.58147 4.33708 2.75149C4.50934 2.92151 4.60755 3.15306 4.61026 3.39554C4.61026 4.60108 4.61026 5.80661 4.61026 7.01215C4.61026 7.83212 4.61026 8.65466 4.61026 9.48748L4.86634 9.23044C6.67083 7.24263 8.47788 5.26082 10.2875 3.28501C10.5137 3.03335 10.7903 2.83249 11.0992 2.69562C11.4081 2.55874 11.7424 2.48892 12.08 2.49074C12.5666 2.49074 13.0531 2.49074 13.5397 2.49074C13.6546 2.48035 13.7698 2.50751 13.8681 2.56819C13.9664 2.62888 14.0425 2.71982 14.0851 2.82747C14.1339 2.93074 14.1493 3.04674 14.1291 3.15922C14.1089 3.27169 14.0541 3.375 13.9725 3.45466L11.3374 6.27186L8.84066 8.94512C8.79877 8.98713 8.76554 9.03702 8.74287 9.09193C8.7202 9.14684 8.70853 9.2057 8.70853 9.26514C8.70853 9.32458 8.7202 9.38344 8.74287 9.43835C8.76554 9.49326 8.79877 9.54314 8.84066 9.58516C9.52353 10.442 10.2064 11.2988 10.8893 12.1556L17.7009 20.7383C17.8956 20.9825 18.0927 21.2267 18.2797 21.476C18.3443 21.5632 18.4298 21.6325 18.5284 21.6774C18.6269 21.7224 18.7352 21.7415 18.8431 21.7331C20.1234 21.7331 21.4038 21.7331 22.6842 21.7331H32.5944H42.5046H62.3046H72.2276H74.4759C74.5375 21.7245 74.6003 21.7341 74.6566 21.7605C74.713 21.787 74.7605 21.8292 74.7935 21.8821L74.7755 22.0544Z"
                          fill="#333333"
                        />
                        <path
                          d="M25.5904 14.325C25.3856 14.6257 25.1833 14.9265 24.9759 15.2246C24.7019 15.6617 24.3463 16.0414 23.9285 16.3428C23.4515 16.6498 22.9077 16.8367 22.3434 16.8877C21.7198 16.9661 21.0886 16.961 20.4663 16.8723C19.7358 16.7779 19.0378 16.5114 18.4295 16.0946C17.8211 15.6779 17.3195 15.1225 16.9657 14.4741C16.5725 13.7601 16.3293 12.9727 16.2513 12.1607C16.2206 11.8739 16.2078 11.5854 16.2129 11.297C16.2129 10.3948 16.1821 9.49769 16.2129 8.59032C16.2604 6.96838 16.9258 5.4265 18.072 4.28227C18.9548 3.37572 20.1085 2.78359 21.3575 2.59606C22.5653 2.38875 23.8039 2.45372 24.9835 2.78627C25.7523 2.99714 26.4565 3.39738 27.0322 3.95068C27.6505 4.56667 28.079 5.3484 28.2665 6.20239C28.393 6.71976 28.4575 7.25047 28.4585 7.78321V16.0677C28.4769 16.3007 28.4085 16.5321 28.2665 16.7173C28.1246 16.9025 27.9193 17.0283 27.6903 17.0702C27.6494 17.0741 27.6082 17.0741 27.5674 17.0702C27.2089 17.0702 26.8529 17.0702 26.4944 17.0702C26.2569 17.0642 26.0311 16.965 25.8655 16.794C25.6999 16.6229 25.6076 16.3936 25.6084 16.1551C25.6084 15.5845 25.6084 15.0139 25.6084 14.4432V14.3301L25.5904 14.325ZM25.6084 8.29729V5.58034C25.616 5.52192 25.6104 5.46252 25.5919 5.40659C25.5734 5.35067 25.5426 5.29965 25.5017 5.25738C25.4608 5.2151 25.411 5.18265 25.3558 5.16246C25.3007 5.14228 25.2417 5.13487 25.1833 5.14079C24.3203 5.14079 23.4548 5.14079 22.5918 5.14079C21.7637 5.1356 20.9656 5.45144 20.3639 6.02246C19.9829 6.36752 19.6796 6.79019 19.4743 7.26225C19.2689 7.73432 19.1663 8.24492 19.1731 8.75997C19.1731 9.69304 19.1731 10.6261 19.1731 11.5592C19.1762 11.6704 19.1873 11.7812 19.2064 11.8908C19.2732 12.3491 19.4545 12.7831 19.7334 13.1521C20.0124 13.5211 20.38 13.8132 20.8018 14.0011C21.3746 14.2724 22.018 14.3551 22.6404 14.2376C23.215 14.1716 23.7625 13.9565 24.229 13.6135C24.6956 13.2705 25.0651 12.8114 25.3011 12.2815C25.5184 11.7874 25.6234 11.2509 25.6084 10.7109C25.6084 9.90639 25.6084 9.10184 25.6084 8.29729Z"
                          fill="#333333"
                        />
                        <path
                          d="M71.8308 14.3225C71.6541 14.5795 71.4774 14.8365 71.3007 15.0936C71.0578 15.4855 70.7623 15.8419 70.4223 16.1526C69.9451 16.5449 69.3655 16.7912 68.7527 16.8621C67.9943 16.983 67.2208 16.9725 66.4659 16.8312C65.7637 16.7045 65.0999 16.4174 64.5258 15.9922C63.9517 15.567 63.4827 15.0151 63.1548 14.379C62.7682 13.6459 62.5396 12.8393 62.4839 12.0116C62.4199 11.2122 62.4609 10.4102 62.4532 9.61084C62.4403 9.18228 62.4489 8.75333 62.4788 8.32562C62.5805 7.05969 63.0497 5.85146 63.8283 4.85039C64.7478 3.63492 66.1025 2.82642 67.6055 2.59611C68.8775 2.36927 70.1855 2.45751 71.4159 2.85316C71.9775 3.02105 72.5006 3.29869 72.955 3.67011C73.4094 4.04153 73.7862 4.49942 74.0638 5.01747C74.3682 5.61157 74.5634 6.25593 74.6399 6.91959C74.6913 7.34595 74.7127 7.77543 74.7039 8.20481C74.7039 10.8541 74.7039 13.5042 74.7039 16.1552C74.7077 16.2764 74.6874 16.3972 74.6442 16.5105C74.6011 16.6238 74.5359 16.7273 74.4525 16.8151C74.3691 16.9029 74.2691 16.9732 74.1584 17.0218C74.0477 17.0705 73.9285 17.0965 73.8077 17.0985C73.4466 17.0985 73.0855 17.0985 72.7245 17.0985C72.4921 17.0862 72.273 16.9855 72.1118 16.817C71.9506 16.6485 71.8593 16.4248 71.8564 16.1912C71.8564 15.6025 71.8564 15.0139 71.8564 14.4253V14.3456L71.8308 14.3225ZM71.8461 8.25879V5.58296C71.8536 5.52378 71.8476 5.46366 71.8283 5.40721C71.8091 5.35076 71.7773 5.29947 71.7352 5.25729C71.6932 5.2151 71.6421 5.18314 71.5859 5.16385C71.5296 5.14455 71.4697 5.13845 71.4108 5.14599H68.85C68.6245 5.14677 68.3997 5.17089 68.1791 5.21796C67.3988 5.39461 66.7008 5.83066 66.1984 6.45539C65.6959 7.08012 65.4184 7.8569 65.4109 8.65978C65.4109 9.63655 65.4109 10.6159 65.4109 11.5952C65.4108 11.7133 65.4211 11.8311 65.4416 11.9474C65.5126 12.3804 65.6868 12.7899 65.9494 13.1408C66.212 13.4917 66.5553 13.7736 66.9499 13.9626C67.6148 14.2938 68.3752 14.3776 69.0958 14.1991C69.8704 14.0515 70.569 13.6366 71.0709 13.0264C71.5727 12.4161 71.846 11.6488 71.8436 10.8575C71.8589 9.99384 71.8461 9.12503 71.8461 8.25879Z"
                          fill="#333333"
                        />
                        <path
                          d="M43.5938 11.6261V7.2692C43.601 6.17441 43.9796 5.11477 44.6671 4.26486C45.3546 3.41495 46.3101 2.82547 47.376 2.59357C47.7044 2.52396 48.0391 2.48864 48.3747 2.48818H50.5821C50.774 2.48715 50.9641 2.52437 51.1415 2.59767C51.3189 2.67097 51.4801 2.77889 51.6156 2.91518C51.7512 3.05147 51.8584 3.21342 51.9311 3.39163C52.0038 3.56984 52.0406 3.76076 52.0392 3.95333C52.0517 4.12446 52.0517 4.29628 52.0392 4.46742C52.015 4.65909 51.92 4.83465 51.773 4.95936C51.626 5.08407 51.4377 5.14885 51.2454 5.14087C50.4566 5.14087 49.6705 5.14087 48.8818 5.14087C48.768 5.14039 48.6543 5.1464 48.5412 5.15887C48.0413 5.22373 47.5749 5.44645 47.2094 5.79483C46.8439 6.14322 46.5983 6.59924 46.5079 7.09698C46.4824 7.25851 46.4696 7.42181 46.4695 7.58536C46.4695 10.4386 46.4695 13.2909 46.4695 16.1424C46.475 16.3842 46.3849 16.6184 46.2189 16.7937C46.0528 16.9691 45.8244 17.0713 45.5835 17.078C45.2198 17.09 44.8562 17.09 44.4926 17.078C44.2521 17.0733 44.0233 16.9734 43.8559 16.8C43.6885 16.6267 43.5961 16.394 43.5989 16.1526C43.5989 15.7362 43.5989 15.3224 43.5989 14.9085L43.5938 11.6261Z"
                          fill="#333333"
                        />
                        <path
                          d="M32.3736 11.5258C32.3736 10.0915 32.3736 8.65465 32.3736 7.22034C32.3778 5.99857 32.8597 4.82729 33.7154 3.95845C34.4104 3.22979 35.3194 2.74341 36.3095 2.57042C36.5627 2.52166 36.8199 2.4967 37.0777 2.49587H39.3568C39.7354 2.49367 40.0998 2.63996 40.3725 2.90357C40.6451 3.16717 40.8044 3.52725 40.8164 3.90705C40.8331 4.10118 40.8331 4.2964 40.8164 4.49054C40.7869 4.67891 40.6889 4.84963 40.5414 4.96973C40.3938 5.08983 40.2072 5.1508 40.0175 5.14086H37.5796C37.3928 5.14128 37.2068 5.16634 37.0265 5.2154C36.5393 5.34019 36.1046 5.61799 35.7858 6.00826C35.467 6.39854 35.2809 6.88086 35.2544 7.38485C35.2544 7.46368 35.2544 7.54336 35.2544 7.6239V16.1064C35.2648 16.3151 35.2051 16.5212 35.0848 16.6918C34.9646 16.8624 34.7907 16.9875 34.5912 17.0471C34.5224 17.0691 34.4508 17.0812 34.3786 17.0831C34.0022 17.0831 33.6283 17.0831 33.2545 17.0831C33.0198 17.0732 32.7981 16.9728 32.6354 16.8028C32.4727 16.6328 32.3817 16.4063 32.3812 16.1706C32.3744 14.6198 32.3719 13.0715 32.3736 11.5258Z"
                          fill="#333333"
                        />
                        <path
                          d="M58.4923 9.71621C58.4923 11.7417 58.4923 13.7681 58.4923 15.7953C58.4988 15.9671 58.4902 16.1391 58.4667 16.3094C58.4348 16.5209 58.3293 16.7143 58.1691 16.8555C58.0088 16.9966 57.8041 17.0763 57.5909 17.0805C57.2376 17.0805 56.8842 17.0805 56.5308 17.0805C56.2867 17.0751 56.0547 16.9728 55.8858 16.7959C55.7168 16.6191 55.6246 16.3822 55.6294 16.1372C55.6063 13.3817 55.6294 10.6287 55.6294 7.8732C55.6294 6.45775 55.6294 5.04058 55.6294 3.6217C55.6207 3.44771 55.6432 3.27357 55.696 3.10761C55.759 2.93126 55.8742 2.77844 56.0262 2.66958C56.1781 2.56072 56.3595 2.501 56.5461 2.49841H57.5858C57.8172 2.50305 58.0383 2.5946 58.2057 2.75498C58.3731 2.91536 58.4744 3.1329 58.4898 3.36465C58.4898 3.49831 58.4898 3.6217 58.4898 3.77078C58.4932 5.74831 58.494 7.73011 58.4923 9.71621Z"
                          fill="#333333"
                        />
                      </svg>
                      <img
                        className="w-full max-h-[231px] object-cover object-center"
                        src={Frame}
                        alt=""
                      />
                      <h1 className=" text-primaryBlack font-bold text-xl">
                        Hauling
                      </h1>
                    </div>
                    <div className="w-full max-w-[394px] flex flex-col gap-y-4 justify-center">
                      <h1 className=" text-primaryBlack font-bold text-xl sm:text-[26px]">
                        Estimated Cost
                      </h1>
                      <p className="text-[#718096] max-w-[374px]">
                        This is only an estimate based on the information
                        provided and our pricing structure. The final price may
                        be influenced by various factors Like traffic,
                        additional services etc.
                      </p>
                      <div className="max-w-[327px]">
                        <p className="text-[#333] text-sm max-w-[374px]">
                          Fare Estimate
                        </p>
                        <p className="py-2.5 mt-2 bg-[#F7F8FF] w-full pl-3 rounded-lg border border-[#DDD]">
                          <span className="text-primaryBlack font-bold text-xl">
                            {(data as ResponseData)?.estimate}
                          </span>
                        </p>
                      </div>
                      <div className="flex flex-col py-4  gap-y-5 sm:flex-row sm:gap-x-[33px] sm:justify-center">
                        <button
                          onClick={toggle}
                          className="h-[48px] inline-flex items-center justify-center capitalize border border-primaryBlue text-primaryBlue font-bold rounded-lg w-full  sm:max-w-[180px]"
                        >
                          back
                        </button>
                        <button
                          onClick={handleBookings}
                          className="h-[48px] bg-primaryBlue text-white font-bold rounded-lg w-full shadow-active-shadow sm:max-w-[180px]"
                          type="button"
                        >
                          Book
                        </button>
                      </div>
                    </div>
                  </div>
                </Dialog.Panel>
              </Transition.Child>
            </div>
          </div>
        </Dialog>
      </Transition>
    </>
  );
}
